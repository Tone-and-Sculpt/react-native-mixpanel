# 1.2.8

- Fix `sharedInstanceWithToken` method definition
- Unify how `reset()` method works on iOS and Android. This change should close an issue: https://github.com/davodesign84/react-native-mixpanel/issues/258 `reset()` method contains new params: `flushOnReset` and `autoGenerateNewUniqueId` and it is backward compatible. More in README.md

#### The old problem with `reset()` method:

Mixpanel introduced identity merge which allows you to call `.identify(SOME_USER_ID)` and Mixpanel will then merge the profiles for the id you pass in, in this case, `SOME_USER_ID`, and the anonymous id of the user prior to identification. This scenario is currently supported by this library. However, signing out causes some issues. This is because on signout Mixpanel recommends calling `.reset()` to get a new anonymous id for the current user. In this implementation, when we call `.reset()` we immediately call `.identify()` with a newly generated id, for ease-of-use. With calling `.identify()` on `.reset()` we are implicitly merging the newly generated id with the anonymous id. This causes problems because identity merge will not work on anonymous ids that have been already merged.

#### Solution:

Allow the user to pass a boolean to `.reset()` to toggle auto-identifying the user and to toggle auto-flush on reset.

#### Mixpanel's Identity Merge Flow

![Mixpanel's Identity Merge Flow](https://camo.githubusercontent.com/267bbd9cb5e376993b8b89c8859e79651830a9e8/68747470733a2f2f66696c65732e726561646d652e696f2f643030363666302d49445f6d616e6167656d656e745f6964656e746966795f332d485454502e706e67 "Mixpanel's Identity Merge Flow")

# 1.2.7

- [Android] Update SDK to 5.8.5 (https://github.com/mixpanel/mixpanel-android/releases/tag/v5.8.5)
- [iOS]  Update SDK to 3.6.3: (https://github.com/mixpanel/mixpanel-iphone/releases/tag/v3.6.3)

# 1.2.6

- Fix issue with `showInAppMessageIfAvailable()` that throws "Unhandled promise rejection", ReferenceError : Can't find variable: token

# 1.2.5

- [iOS][tvOS] deployment_target changed to 10.0
- [Android] Update SDK to 5.8.4 (https://github.com/mixpanel/mixpanel-android/releases/tag/v5.8.4)
- [Android] Add option to disable automatic flushing when the app goes into the background. Add the following to you <application> tag on your AndroidManifest.xml if you don't want the SDK to automatically flush its queues when the app goes into the background: (https://github.com/mixpanel/mixpanel-android/releases/tag/v5.8.3)
- [iOS] Update SDK to 3.6.2 (https://github.com/mixpanel/mixpanel-iphone/releases/tag/v3.6.2)
- [iOS] Remove IFA/IDFA - Removing using IFA as distinct id. Beginning with this version, Mixpanel no longer uses the IFA(ID for Advertisers) but uses a randomly generated UUID as the default distinct ID instead. After you call reset, Mixpanel generates a new distinct_id by default. This ensures that multiple users on the same device are not assigned the same alias. If you want to use IFV(identifierForVendor) as the distinct_id, you can set MIXPANEL_UNIQUE_DISTINCT_ID=1 in build settings Preprocessor Macros on the Mixpanel framework target. After you call reset, the IFV will not change. However, when a user removes and then re-installs the app, the IFV will change with each installation. More: (https://github.com/mixpanel/mixpanel-iphone/releases/tag/v3.6.2)
- [iOS] All fixes from SDK 3.6.1: (https://github.com/mixpanel/mixpanel-iphone/releases/tag/v3.6.1)
- Allow to configure mixpanel server urls, e.g. https://api-eu.mixpanel.com More in README.md
- [iOS] Add access to the setAppSessionPropertiesIOS which was not exposed 

# 1.2.4

- [Android] Update SDK to 5.8.2 (https://github.com/mixpanel/mixpanel-android/releases/tag/v5.8.2)

# 1.2.3

- Use proper version within package.json


# 1.2.2

- [Android] Fix crash with initPushHandling(). More info: https://github.com/mixpanel/mixpanel-android/pull/582 

# 1.2.1

- [Android] Update SDK to 5.8.1 (https://github.com/mixpanel/mixpanel-android/releases/tag/v5.8.1) Check referrer changes on: https://github.com/mixpanel/mixpanel-android/releases/tag/v5.8.0

# 1.2.0

- [iOS] Update SDK to 3.6.0 (https://github.com/mixpanel/mixpanel-iphone/releases/tag/v3.6.0)
- [Android] Update SDK to 5.7.0 (https://github.com/mixpanel/mixpanel-android/releases/tag/v5.7.0)
- Add methods add, set for Group Analytics. Only single values supported 
- Add information regarding disableIpAddressGeolocalization

# 1.1.14

- [Android] Add check against potential NPE 
- Update Readme

# 1.1.13

- [Android] Update mixpanel-android SDK to 5.6.8

# 1.1.12

- Method createAlias should accept two parameters (https://developer.mixpanel.com/docs/javascript-full-api-reference#section-mixpanel-alias). Second parameter is optional to keep backward compatabiluty. Will fallback to distinctID generated by mixpanel instance. 

# 1.1.11

- [iOS] Add missing file

# 1.1.10

- Fix typo

# 1.1.9

- Expose iOS params that can be passed on Mixpanel instance initalization: trackCrashes, automaticPushTracking, launchOptions
- Update Typescript defs and readme

# 1.1.8

- Add support for AppleTV
- Add information about Autolinking from RN >= 0.60
- Update podspec to be package.json driven
- Add fine grained in-app message control
- Update iOS SDK to 3.5.0
- Update Android SDK to 5.6.5
- Add opt in / opt out tracking option
- Add push / registration methods
- Update README
- Update Typescript defs
- Fix crash on clearPushRegistrationId
